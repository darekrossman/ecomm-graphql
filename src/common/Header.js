import React from "react"
import gql from "graphql-tag"
import { Query } from "react-apollo"
import NavMenu from "./NavMenu"
import { Flex, Drawer, IconButton } from "../ui"

const Logo = props => (
  <svg viewBox="0 0 281 50" {...props}>
    <path d="M9.4 20.8c0-9.1 0-10.7-.1-12.6-.1-2-.6-2.9-2.5-3.3-.5-.1-1.5-.2-2-.2-.2 0-.5-.1-.5-.3 0-.3.3-.5.9-.5 2.6 0 6 .2 6.4.2.5 0 3.9-.2 5.6-.2.6 0 .9.1.9.5 0 .2-.2.3-.5.3-.4 0-.8.1-1.5.2-1.6.3-2 1.3-2.2 3.3.1 1.9.1 3.5.1 12.6v3.5h.2c1-1.1 11.5-11.8 13.6-14.1C29.5 8.5 31 7 31 6c0-.7-.3-1-.8-1.2-.3-.1-.5-.2-.5-.5s.3-.4.7-.4c1.2 0 3 .2 4.4.2.3 0 4.1-.2 5.6-.2.6 0 .9.1.9.4s-.1.4-.6.4c-.9 0-2.1.3-3.3.8-2.4 1-3.7 2.5-6.3 5-1.5 1.4-11.6 11.3-12.8 12.7 1.5 1.7 13.6 14.2 16 16.4 4.9 4.5 5.9 5.5 8.7 6.6 1.5.6 3.2.8 3.6.8.4 0 .8.1.8.3 0 .3-.3.5-1.3.5h-3c-1.6 0-2.7 0-4-.1-3.1-.3-4.5-1.6-7-3.5-2.6-2.2-14.9-15.5-17.7-18.9H14V31c0 5.6 0 10.2.3 12.6.2 1.7.5 3 2.3 3.2.8.1 1.7.2 2.3.2.3 0 .5.2.5.3 0 .3-.3.5-.9.5-2.8 0-6.2-.2-6.7-.2s-3.8.2-5.6.2c-.6 0-.9-.1-.9-.5 0-.2.1-.3.5-.3.5 0 1.2-.1 1.7-.2 1.2-.2 1.5-1.5 1.7-3.2.3-2.4.3-7 .3-12.6V20.8h-.1z" />
    <path d="M45.6 29.6c0 3.6 0 6.6.2 8.2.1 1.1.4 1.9 1.6 2.1.6.1 1.5.2 1.9.2.3 0 .3.1.3.2 0 .2-.2.3-.7.3-2.3 0-5-.1-5.2-.1s-2.9.1-4.1.1c-.5 0-.7-.1-.7-.3 0-.1.1-.2.3-.2.4 0 .9-.1 1.3-.2.8-.1 1-1 1.2-2.1.2-1.6.2-4.6.2-8.2V23c0-5.9 0-6.9-.1-8.1-.1-1.3-.5-1.9-1.4-2.1-.5-.1-1-.2-1.3-.2-.2 0-.3-.1-.3-.2 0-.2.2-.3.7-.3 1.4 0 4 .1 4.2.1s2.9-.1 4.1-.1c.5 0 .7.1.7.3s-.2.2-.3.2c-.3 0-.5 0-1 .1-1.1.2-1.5.8-1.6 2.1-.1 1.2-.1 2.3-.1 8.1l.1 6.7zM60.6 22.9c0-5.9 0-6.9-.1-8.1-.1-1.3-.4-1.9-1.8-2.1-.3-.1-1-.1-1.4-.1-.2 0-.3-.1-.3-.2 0-.2.2-.3.7-.3 1.9 0 4.5.1 4.7.1.5 0 3.7-.1 5-.1 2.6 0 5.5.2 7.7 1.7 1 .7 2.9 2.5 2.9 5.1 0 2.8-1.3 5.6-5.1 8.7 3.4 4 6.3 7.3 8.7 9.7 2.3 2.1 4.1 2.6 5.1 2.7h1.6c.2 0 .4.1.4.2 0 .2-.3.3-1 .3h-3c-2.4 0-3.4-.2-4.5-.7-1.8-.9-3.3-2.7-5.7-5.5-1.8-2.1-3.7-4.6-4.6-5.6-.2-.2-.3-.2-.5-.2l-5.2-.1c-.2 0-.3.1-.3.3v.9c0 3.6 0 6.6.2 8.2.1 1.1.4 1.9 1.6 2.1.6.1 1.5.2 1.9.2.3 0 .3.1.3.2 0 .2-.2.3-.7.3-2.3 0-5-.1-5.2-.1 0 0-2.7.1-3.9.1-.5 0-.7-.1-.7-.3 0-.1.1-.2.3-.2.4 0 .9-.1 1.3-.2.8-.1 1-1 1.2-2.1.2-1.6.2-4.6.2-8.2v-6.7h.2zm3.3 3.3c0 .2.1.3.3.5.6.3 2.6.6 4.4.6 1 0 2.2-.1 3.1-.7 1.5-.9 2.6-2.9 2.6-5.8 0-4.7-2.8-7.5-7.3-7.5-1.3 0-2.4.1-2.8.2-.2.1-.3.2-.3.5v12.2zM92.2 22.9c0-5.9 0-6.9-.1-8.1-.1-1.3-.4-1.9-1.8-2.1-.3-.1-1-.1-1.4-.1-.2 0-.3-.1-.3-.2 0-.2.2-.3.7-.3 1.9 0 4.4.1 4.6.1.4 0 2.8-.1 4.1-.1.5 0 .7.1.7.3s-.2.2-.3.2c-.3 0-.5 0-1 .1-1.1.2-1.5.8-1.6 2.1-.1 1.2-.1 2.3-.1 8.1v2.3h.2c.7-.7 8.3-7.7 9.8-9.1 1.2-1.1 2.3-2.1 2.3-2.7 0-.5-.2-.7-.5-.8-.2-.1-.4-.2-.4-.3 0-.2.2-.3.5-.3.8 0 2.1.1 3.1.1.2 0 3-.1 4-.1.5 0 .6.1.6.3s-.1.3-.4.3c-.6 0-1.5.2-2.3.5-1.7.7-2.6 1.6-4.5 3.2-1 .9-8.4 7.3-9.2 8.3 1.1 1.1 9.8 9.2 11.5 10.6 3.5 2.9 4.2 3.5 6.3 4.3 1.1.4 2.3.5 2.6.5.3 0 .5.1.5.2 0 .2-.2.3-.9.3h-2.1c-1.2 0-2 0-2.9-.1-2.2-.2-3.3-1-5.1-2.3-1.9-1.4-10.8-10-12.8-12.3h-.2v3.7c0 3.6 0 6.6.2 8.2.1 1.1.4 1.9 1.6 2.1.4.1 1.1.2 1.4.2s.3.1.3.2c0 .2-.2.3-.7.3-2.1 0-4.5-.1-4.8-.1s-2.8.1-4 .1c-.5 0-.7-.1-.7-.3 0-.1.1-.2.3-.2.4 0 .9-.1 1.3-.2.8-.1 1-1 1.2-2.1.2-1.6.2-4.6.2-8.2l.1-6.6zM127.3 29.6c0 5.5.2 8 .9 8.6.7.6 1.8.9 5 .9 2.2 0 4.1 0 5.1-1.1.5-.6 1-1.5 1.1-2.3 0-.3.1-.5.4-.5.2 0 .3.2.3.6 0 .4-.3 2.7-.6 3.8-.3.9-.4 1-2.6 1-3 0-5.2-.1-7-.1-1.8-.1-3.1-.1-4.3-.1h-1.7c-.8 0-1.8.1-2.4.1-.5 0-.7-.1-.7-.3 0-.1.1-.2.3-.2.4 0 .9-.1 1.3-.2.8-.1 1-1 1.2-2.1.2-1.6.2-4.6.2-8.2v-6.6c0-5.9 0-6.9-.1-8.1-.1-1.3-.4-1.9-1.8-2.1-.3-.1-1-.1-1.4-.1-.2 0-.3-.1-.3-.2 0-.2.2-.3.7-.3 1.9 0 4.5.1 4.7.1s3.3-.1 4.5-.1c.5 0 .7.1.7.3s-.2.2-.3.2c-.3 0-.9 0-1.4.1-1.2.2-1.6.8-1.6 2.1-.1 1.2-.1 2.3-.1 8.1l-.1 6.7zM155.1 12.9c.5-1.2.7-1.5.9-1.5.3 0 .4.2.9 1.4.6 1.4 7.2 17 9.8 22.7 1.5 3.4 2.7 4 3.6 4.2.6.2 1.3.2 1.7.2.3 0 .4 0 .4.2s-.4.3-.8.3c-.6 0-3.7 0-6.6-.1-.8 0-1.3 0-1.3-.3 0-.2.1-.2.3-.3.3-.1.5-.4.3-1l-3.9-9.3c-.1-.2-.2-.2-.4-.2h-9c-.2 0-.3.1-.4.3l-2.5 6.7c-.4.9-.6 1.8-.6 2.5 0 .8.9 1.1 1.6 1.1h.4c.3 0 .4.1.4.2 0 .2-.3.3-.6.3-1 0-2.8-.1-3.3-.1s-2.8.1-4.7.1c-.5 0-.8-.1-.8-.3s.2-.2.4-.2c.3 0 .9 0 1.2-.1 1.9-.2 2.8-1.7 3.5-3.5l9.5-23.3zm4.3 15.1c.2 0 .2-.1.2-.3l-4-10.2c-.2-.6-.4-.6-.6 0l-3.7 10.2c-.1.2 0 .3.1.3h8zM179.5 35.4c.1 3.1.5 4.1 1.6 4.4.8.2 1.7.2 2.1.2.2 0 .3.1.3.2 0 .2-.3.3-.8.3-2.4 0-4.1-.1-4.4-.1-.4 0-2.1.1-4 .1-.4 0-.7 0-.7-.3 0-.2.1-.2.3-.2.3 0 1.1 0 1.7-.2 1-.3 1.3-1.4 1.3-4.8V13.4c0-1.5.1-1.9.5-1.9.3 0 1 .8 1.5 1.2.6.6 6.9 6.7 13.3 12.9 4.2 4 8.7 8.6 10.1 9.8l-.5-19.2c0-2.5-.3-3.3-1.6-3.6-.8-.2-1.7-.2-2.1-.2-.3 0-.3-.1-.3-.3s.3-.3.8-.3c1.9 0 3.9.1 4.4.1s1.8-.1 3.6-.1c.5 0 .8 0 .8.3 0 .2-.2.3-.5.3-.2 0-.5 0-1 .1-1.4.3-1.6 1.1-1.6 3.4l-.1 22.1c0 2.5-.1 2.7-.4 2.7-.3 0-.8-.4-3.1-2.4-.5-.4-6.5-5.9-11-10.2-4.9-4.7-9.6-9.5-11-10.8l.8 18.1zM218.1 22.9c0-5.9 0-6.9-.1-8.1-.1-1.3-.4-1.9-1.8-2.1-.3-.1-1-.1-1.4-.1-.2 0-.3-.1-.3-.2 0-.2.2-.3.7-.3 1.9 0 4.5.1 4.7.1.5 0 3.1-.1 5.7-.1 4.2 0 11.8-.3 16.8 4.3 2.1 2 4.1 5.1 4.1 9.6 0 4.8-2.2 8.4-4.5 10.6-1.8 1.7-5.6 4.3-12.7 4.3-1.8 0-4-.1-5.8-.2-1.8-.1-3.3-.2-3.5-.2h-1.7c-.8 0-1.8.1-2.4.1-.5 0-.7-.1-.7-.3 0-.1.1-.2.3-.2.4 0 .9-.1 1.3-.2.8-.1 1-1 1.2-2.1.2-1.6.2-4.6.2-8.2v-6.7h-.1zm3.5 4.1c0 4 0 7.5.1 8.2 0 .9.1 2.5.5 2.9.5.7 2.2 1.5 7.1 1.5 3.9 0 7.5-1.3 10-3.5 2.2-1.9 3.4-5.5 3.4-9 0-4.8-2.3-7.9-4-9.5-3.9-3.7-8.7-4.3-13.7-4.3-.8 0-2.4.1-2.7.3-.4.2-.5.3-.5.8V27h-.2zM251.9 10.3c-.3-.3-.4-.5-.4-.6s.2-.2.4-.2c.7 0 2.3.5 2.9.7.5.2.7.4.7 1 0 2.7-2.1 5.8-3.6 7.4-.2.2-.3.3-.5.3-.1 0-.2-.1-.2-.2s0-.2.2-.5c.6-1.2 1.4-3.2 1.4-5.4-.1-1.2-.7-2.2-.9-2.5zM262.3 40c-.6-.3-.6-.4-.6-1.4 0-1.9.2-3.4.2-4 0-.4.1-.6.3-.6.3 0 .3.1.3.4 0 .3 0 .9.1 1.4.6 2.8 3.4 3.8 6.2 3.8 4 0 6-2.6 6-5 0-2.6-1.2-4.1-4.8-6.8l-1.9-1.4c-4.4-3.3-5.5-5.6-5.5-8.2 0-4 3.4-6.8 8.7-6.8 1.6 0 2.9.2 3.9.4.8.2 1.1.2 1.5.2.3 0 .4.1.4.3s-.2 1.4-.2 4c0 .6-.1.9-.3.9-.3 0-.3-.2-.3-.5 0-.5-.3-1.5-.5-1.9-.3-.4-1.4-2-5.2-2-2.9 0-5.2 1.6-5.2 4.4 0 2.1 1.1 3.5 5.1 6.3l1.2.8c5 3.5 6.1 5.8 6.1 8.9 0 1.5-.7 4.4-3.6 6.3-1.8 1.1-4.1 1.6-6.3 1.6-1.9-.1-3.9-.3-5.6-1.1z" />
  </svg>
)

class Header extends React.Component {
  state = {
    navOpen: false
  }

  toggleNav = () => {
    this.setState({ navOpen: !this.state.navOpen })
  }

  render() {
    return (
      <Query
        query={gql`
          query NavMenu {
            menu: getNavMenu {
              id
              levels
            }
          }
        `}
      >
        {({ loading, error, data }) => {
          return (
            <>
              <Flex
                height={60}
                alignItems="center"
                justifyContent="space-between"
                px={2}
                bg="#fff"
              >
                <Flex width={40}>
                  {this.props.leftButton || (
                    <IconButton
                      icon="Menu"
                      color="#111"
                      bg="transparent"
                      onClick={this.toggleNav}
                    />
                  )}
                </Flex>
                <Logo height="26px" />
                <Flex width={40}>
                  <IconButton icon="Search" color="#111" bg="transparent" />
                </Flex>
              </Flex>

              <Drawer
                isOpen={this.state.navOpen}
                close={this.toggleNav}
                bg="white"
              >
                <NavMenu menu={data.menu} onNavigation={this.toggleNav} />
              </Drawer>
            </>
          )
        }}
      </Query>
    )
  }
}

export default Header
